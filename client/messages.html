<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="./libs/bootstrap.css">
    <link rel="stylesheet" href="./style.css">
    <script src="./libs/jquery-1.4.4.min.js"></script>
    <title>messages</title>
</head>

<body>


    <nav class="navbar navbar-expand-lg bg-dark navbar-dark position-fixed top-0 w-100" style="z-index: 200;">
        <div class="container">
            <a href="#" class="navbar-brand text-danger fs-2">Secret Message</a>
            <div class="navbar-toggler border-none">
                <button class="navbar-toggler border-none" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">

<div class="span navbar-toggler-icon"></div>
                </button>

            </div>

            <div class="collapse navbar-collapse " id="navmenu">
                <ul class="navbar-nav ms-auto">
                    <!-- <li class="nav-item">
                        <a href="./index.html" class="nav-link">Create account</a>
                    </li> -->
                    <!-- <li class="nav-item">
                        <a href="#" class="nav-link">Learn from scratch</a>
                    </li> -->
                    <li class="nav-item">
                        <!-- <span class="nav-link" > -->
                        <button type="button" class="bg-dark text-secondary nav-link border-none fw-bolder btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                             Logout
                              </button>
                        <!-- </span> -->
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">About</a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- menu here  -->

    </nav>
    <!-- end of nav bar here  -->

    <!-- Button trigger modal -->


    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger" id="staticBackdropLabel">info!!!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    please you logout please take a screenshot your login details
                    <button class=" text-secondary fw-bolder btn btn-outline-primary" data-bs-dismiss="modal" onclick="alert_()">here</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="logout" onclick="logout()">Logout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- end of modal here -->

    <div class="user-info" style="margin-top:6rem">
        <div class=" row justify-content-between p-3">

            <div class=" col-12 col-sm">
                <div class="container d-flex gap-3 text-center justify-content-center">
                    <a href="#" id="link"></a>
                    <div id="copy_" class="btn btn-primary">&copy;&nbsp;</div>
                </div>
            </div>
            <div class="col-12 col-sm" id="logindetails">
                <span>  <div id="user-id" class="fw-bolder">User-Id : &nbsp;</div></span>
                <span>  <div id="password" class="fw-bolder">Password : &nbsp;</div></span>
            </div>
        </div>
    </div>
    <div class="reload 
    position-fixed end-0 p-2 bg-success shadow rounded top-50" style="z-index: 201;">
        refreesh page
    </div>
    <h2 id="name" class="text-center bg-dark text-danger text-uppercase">Name</h2>

    <div class="row">
        <div class="col-md-10 col-lg-6  m-auto   d-flex justify-content-center align-items-center">
            <div class="row" id="img_container" style="perspective: 100px;">
            </div>
        </div>
    </div>

    <h2 class="text-center fs-1 text-success fw-bolder">Messages</h2>
    <div class="delete-all-messages btn btn-danger " onclick="delete_all()">
        DELETE ALL
    </div>

    <div class="row">

        <div class=" border border-success m-auto">
            <div class="message-box">
            </div>
        </div>
    </div>

    <script src="./delete.message.js"></script>
    <script src="./images.js"></script>
    <script>
        const messageBox = document.querySelector(".message-box")
        const isUser = sessionStorage.getItem("login")

        function logout() {
            location.replace("./index.html")
            sessionStorage.removeItem("login")
        }
        if (isUser) {
            function alert_() {
                $("#logindetails").addClass("alert");
                setTimeout(() => {
                    $("#logindetails").removeClass("alert");
                }, 4000);
            }
            const href = location.href
            $("#link").text(href);
            fetchuser(id)
            $("#copy_").click(function(e) {
                // alert("fail to copy text")
                navigator.clipboard.writeText(href).then(data => {
                    alert("text copy to clipboard")
                }).catch(err => {
                    alert("fail to copy")
                })
                e.preventDefault();
            });
        } else {
            location.href = `./message.html?${id}`
        }
    </script>

    <script src="./libs/bootstrap.bundle.min.js"></script>
</body>

</html